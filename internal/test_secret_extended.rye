
print "Testing Secret Type Extended"

s: secret "my-secret-password"

print "1. Creating secret:"
inspect s
print s

print "2. Transformations (Infection Rule):"
up: to-upper s
print "to-upper:"
inspect up
print reveal up

low: to-lower up
print "to-lower:"
inspect low
print reveal low

cap: capitalize secret "hello"
print "capitalize:"
inspect cap
print reveal cap

print "3. Trimming (Infection Rule):"
tr: trim secret "  hello  "
print "trim:"
inspect tr
print reveal tr

tr-left: trim\left secret "__hello" "_"
print "trim\left:"
inspect tr-left
print reveal tr-left

tr-right: trim\right secret "hello__" "_"
print "trim\right:"
inspect tr-right
print reveal tr-right

print "4. Slicing (Infection Rule):"
h: head s 5
print "head:"
inspect h
print reveal h

t: tail s 5
print "tail:"
inspect t
print reveal t

r: rest s
print "rest:"
inspect r
print reveal r

rf: rest\from s 3
print "rest\from:"
inspect rf
print reveal rf

print "5. Concatenation (Infection Rule):"
s2: secret "123"
combined: s ++ s2
print "secret ++ secret:"
inspect combined
print reveal combined

print "6. Attempting forbidden operation (Black Hole Rule):"
try { s ++ "plaintext" }
try { "plaintext" ++ s }
